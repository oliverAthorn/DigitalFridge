@page "/add-recipe"
@using DigitalFridge.Repository.Models
@using DigitalFridge.Service
@inject IRecipeService RecipeService

<PageTitle>Add Recipe</PageTitle>

<h3>Add New Recipe</h3>

<EditForm Model="@newRecipe" OnValidSubmit="HandleValidSubmit" class="recipe-form">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group">
        <label for="title">Title: </label>
        <InputText id="title" @bind-Value="newRecipe.Title" class="form-control" />
    </div>

    <div class="form-group">
        <label for="description">Description: </label>
        <InputTextArea id="description" @bind-Value="newRecipe.Description" class="form-control" />
    </div>

    <div class="form-group">
        <label for="category">Category: </label>
        <InputText id="category" @bind-Value="newRecipe.Category" class="form-control" />
    </div>

    <div class="form-group">
        <label for="prepTime">Preparation Time (minutes): </label>
        <InputNumber id="prepTime" @bind-Value="newRecipe.PreparationTime" class="form-control" />
    </div>

    <div class="form-group">
        <label for="cookTime">Cooking Time (minutes): </label>
        <InputNumber id="cookTime" @bind-Value="newRecipe.CookingTime" class="form-control" />
    </div>

    <div class="form-group">
        <label for="servingSize">Serving Size: </label>
        <InputNumber id="servingSize" @bind-Value="newRecipe.ServingSize" class="form-control" />
    </div>

    <button type="submit" class="btn btn-primary">Add Recipe</button>
</EditForm>

@code {
    private Recipe newRecipe = new Recipe();

    private async Task HandleValidSubmit()
    {
        int recipeId = await RecipeService.AddRecipeAsync(newRecipe);
        // Handle post-submission logic (e.g., redirecting, displaying a success message, etc.)
    }
}
